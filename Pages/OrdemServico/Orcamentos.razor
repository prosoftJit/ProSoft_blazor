@page "/OrdemServico/Orcamentos"
@using ProSoft.Data
@using Microsoft.EntityFrameworkCore
@using ProSoft.Components

<GenericTemplate3 TItem=orcamento Contexto="ctx" HeaderTitle="OrÃ§amentos" 
    Items="ctx.orcamentos"
    ModalSize="modal-lg">
    <GridHeaderTemplate>
        <td>Id</td>
        <td>Nome</td>
    </GridHeaderTemplate>
    <GridRowTemplate Context="p">
        <td>@p.IdOrcamento.ToString("000000")'</td>
        <td>@p.Cliente?.Nome</td>
        @*
        Tentar acessar uma propriedade como p.Cliente.Nome sem nullable (?) ou tentar carregar dados com .Load()
        enquanto usa proxies (lazyloader) provoca esse erro
        There is already an open DataReader associated with this Connection which must be closed first
        *@
    </GridRowTemplate>
    <ItemEditForm Context="item">
        <Orcamento Model="item" ctx="ctx" />
    </ItemEditForm>
</GenericTemplate3>

@code {
    Contexto ctx = new Contexto();
}
